# ************************************************************************************************
# Warning: YAML source code for Canvas Apps should only be used to review changes made within Power Apps Studio and for minor edits (Preview).
# Use the maker portal to create and edit your Power Apps.
# 
# The schema file for Canvas Apps is available at https://go.microsoft.com/fwlink/?linkid=2304907
# 
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
ComponentDefinitions:
  cmpPasswordInput:
    DefinitionType: CanvasComponent
    CustomProperties:
      ColorInvalid:
        PropertyKind: Input
        DisplayName: Color Invalid
        Description: A custom property
        DataType: Color
        Default: =Color.Maroon
      ColorPrimary:
        PropertyKind: Input
        DisplayName: Color Primary
        Description: A custom property
        DataType: Color
        Default: =App.Theme.Colors.Primary
      ControlPadding:
        PropertyKind: Input
        DisplayName: Control Padding
        Description: A custom property
        DataType: Text
        Default: =10
      IsValid:
        PropertyKind: Output
        DisplayName: Is Valid
        Description: A custom property
        DataType: Boolean
      Password:
        PropertyKind: Input
        DisplayName: Password
        Description: A custom property
        DataType: Text
        Default: =""
    Properties:
      Height: =112
      IsValid: |+
        =IsMatch(
            txtPasswordInput.Value,
            "^(?=.*[A-Za-z])(?=.*\d)(?=.*[^A-Za-z\d]).{8,}$"
        ) 
      Width: =300
    Children:
      - txtPasswordInput:
          Control: TextInput@0.0.54
          Properties:
            Appearance: ='TextInputCanvas.Appearance'.Outline
            FontColor: =cmpPasswordInput.ColorPrimary
            TriggerOutput: ='TextInputCanvas.TriggerOutput'.Keypress
            Type: ='TextInputCanvas.Type'.Password
            Width: =Parent.Width - Self.X * 2
            X: =cmpPasswordInput.ControlPadding
            Y: =lblPasswordPrompt.Y + lblPasswordPrompt.Height
      - lblValidationMessage:
          Control: Text@0.0.51
          Properties:
            FontColor: =cmpPasswordInput.ColorInvalid
            Height: =30
            Size: =9
            Text: ="Your Input MUST meet the minimum requirements of 8 characters, to include Numbers, Letters, and Special Characters"
            VerticalAlign: =VerticalAlign.Middle
            Visible: =!cmpPasswordInput.IsValid
            Width: =Parent.Width - Self.X * 2
            X: =cmpPasswordInput.ControlPadding
            Y: =txtPasswordInput.Y + txtPasswordInput.Height
      - lblPasswordPrompt:
          Control: Text@0.0.51
          Properties:
            FontColor: =cmpPasswordInput.ColorPrimary
            Height: =30
            Size: =12
            Text: ="Enter a Password" // (at least minimum 8 characters, 1 special character, and one number)"
            VerticalAlign: =VerticalAlign.Middle
            Width: =Parent.Width - Self.X * 2
            X: =txtPasswordInput.X
            Y: =cmpPasswordInput.ControlPadding
